<header>
    <h3 class="retro shade">
        Пишите письма
    </h3>
</header>
<div class="container-fluid">
    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 border-right">
        <div class="media">
            <p class="content">
                Все сказанное будет прочитанно компетентным жюри и принято к сведению! Можно рассчитывать на полноценный ответ и даже диалог!
            </p>
        </div>
    </div>
    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
        <form action="/mail_us" id="email-us" method="post" class="rr-contact-form" novalidate="novalidate">
            <div class="form-group">
                <label for="email">Email</label>
                <div class="field{{ errors['email'] ? ' error' : '' }}">
                    {{ _self.field_error(errors, 'email') }}
                    <input
                        type="email"
                        name="email"
                        id="email"
                        class="form-control input-lg"
                        maxlength="100"
                        value="{{ data['email']|default('') }}"
                    />
                </div>
            </div>
            <div class="form-group">
                <label for="name">От кого? *</label>
                <div class="field{{ errors['name'] ? ' error' : '' }}">
                    {{ _self.field_error(errors, 'name') }}
                    <input
                        type="text"
                        name="name"
                        id="name"
                        class="form-control input-lg"
                        maxlength="100"
                        value="{{ data['name']|default('') }}"
                    />
                </div>
            </div>
            <div class="form-group">
                <label for="feedback">Что передать? *</label>
                <div class="field{{ errors['feedback'] ? ' error' : '' }}">
                    {{ _self.field_error(errors, 'feedback') }}
                    <textarea
                        name="feedback"
                        id="feedback"
                        class="form-control input-lg"
                        maxlength="6000"
                    >{{ data['feedback']|default('') }}</textarea>
                </div>
            </div>
            <div class="form-group">
                <button class="btn btn-lg btn-orange" type="submit">Отправить</button>
            </div>
        </form>
    </div>
</div>

{% macro field_error(errors, fieldName) %}
    {% set translations = {
            'email_limit_min_error': 'Коротковат email! Хотя бы пять символов.',
            'email_limit_max_error': 'Слишком много! Не больше ста символов.!',
            'email_format_error': 'Не совсем валидный email! Поправить бы..',
            'feedback_limit_min_error': 'Ну хотя бы пять буковок осильте!',
            'feedback_limit_max_error': 'Слишком много! Прочту не более 6000 симфолов =)',
            'name_limit_min_error': 'Имя одной буквой? Серьезно?',
            'name_limit_max_error': 'Слишком много! 100 символов максимум.',
            'required_field': 'Без этого поля не отправлюсь.'
    } %}
    {% if errors[fieldName] %}        
        <div class="errors">
            {% for error in errors[fieldName] %}
                <p class="error">{{ translations[error]|default(error) }}</p>
            {% endfor %}
        </div>
    {% endif %}
{% endmacro %}